default:
  context:
    lang: 'en'
    visitor: 'ant'
    node: 'status'

show_edit:
  src: "<r:show attr='name' edit='true'/>"
  tem: "<span id='/show/edit/list_name.<%= @node.zip %>'><%= link_to_remote(@node.name, :url => edit_node_path(@node.zip) + \"?attribute=name&identifier=%2Fshow%2Fedit%2Flist_name.#{@node.zip}\", :method => :get) %></span>"
  res: "/span id='/show/edit/list_name.22'>.*Ajax\.Request\('/nodes/22/edit\?attribute=name/"

edit_not_each:
  src: "<li class='blah'>this is a post <r:edit>edit post</r:edit></li>"
  tem: "/<li class='blah'>this is a post </li>/"

add_each_no_form:
  src: "<ul do='children' id='things'><li do='each'>I <p do='[name]'>blah</p></li><li do='add'/></ul>"
  res: "/<ul><li.*id=.*_add.*li id=.*_form.*form.*hidden.*I <p><input type='text' id='things_name' name='node\[name\]' value=''\/><\/p><\/form><\/li>/"

add_each_no_form_focus:
  src: "<ul do='children' id='test'><li do='each'>I <p do='[v_title]'>blah</p></li><li do='add' focus='v_title'/></ul>"
  res: "/<ul><li.*id=.*_add.*onclick.*toggle.*test_v_title.*focus.*li id=.*_form.*form.*hidden.*I <p><input type='text' id='test_v_title' name='node\[v_title\]' value=''\/><\/p><\/form><\/li>/"

each_add_with_form:
  context:
    node: 'wiki'
  src: |
    <r:children>
      <li do='each' do='[name]'>blah</li>
      <li do='add'>add new</li>
      <li do='form'><input name='v_title'/> this is the form</li>
    </r:children>
  res: "/<li.*list\.30.*>bird.*<li.*list\.31.*>flower.*<li.*list_add.*list_form.*toggle.*<li .*list_form.*style.*none.*Ajax.Request.*input type='hidden' name='template_url' value='/each/add/with/form/list'.*input type='hidden' name='node\[parent_id\]' value='29'/"

each_add_with_form_klass_set:
  context:
    node: 'wiki'
  src: |
    <r:children>
      <li do='each' do='[name]'>blah</li>
      <li do='add'>add new</li>
      <li do='form'><input name='v_title'/> <input type='select' name='klass' root_class='Note' selected='Post'/> this is the form</li>
    </r:children>
  res: "!/hidden.*node\[klass\].*Node.*select.*node\[klass\]/"


each_edit_with_form:
  context:
    node: 'wiki'
  src: "<r:children><r:each><li><r:show attr='name'>blah</r:show> <r:edit>edit</r:edit></li>\n</r:each><r:form><li><form>this is the form</form></li></r:form></r:children>"
  res: "/<li id='/each/edit/with/form/list\.30'>bird <a href=\"#\" onclick=\"new Ajax.Request\('/nodes/30/edit\?template_url=%2Feach%2Fedit%2Fwith%2Fform%2Flist/"


each_edit_cannot_write:
  context:
    node: 'cleanWater'
    visitor: 'anon'
  src: "<r:children><r:each><li><r:show attr='name'>blah</r:show> <r:edit>edit</r:edit></li>\n</r:each></r:children>"
  res: "/<li id='/each/edit/cannot/write/list\.24'>lake </li>.*/"