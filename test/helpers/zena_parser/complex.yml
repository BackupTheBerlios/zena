default:
  context:
    node_name: '@node'
    node: roger
    visitor: complex_admin
    site: complex
    ref_date: 2005-03-01
  src: "<r:form_dates where='custom_a is not null' do='each' join=', '><r:show attr='name'/> (<r:show date='event_at' format='%Y-%m-%d'/>, <r:show date='log_at' format='%Y-%m-%d'/>)</r:form_dates>"
  res: "engine (, ), transmit_information (2001-06-15, 2002-06-15), dangerous_transportations (2004-03-15, 2006-03-15)"

courses_in_the_next_6_months:
  # log_at   = next_date
  # event_at = last_date
  # custom_a = repetition interval
  src: "<r:form_dates where='custom_a is not null and (event_at is null or log_at lt REF_DATE + 6 month)' do='each' join=', '><r:show attr='name'/>: <r:show date='log_at' format='%Y-%m-%d'/></r:form_dates>"
  res: "engine: , transmit_information: 2002-06-15"

all_formations:
  src: "<r:formations in='site' do='each' join=', '><r:show attr='name'/>: <r:show date='event_at'/></r:formations>"
  res: "form2005: 2005-03-20, form2006: 2006-03-20, transm2001: 2001-06-15, transm2003: 2003-03-20, transp2004: 2004-03-15, transp2006: 2006-04-21"

all_formations_with_people:
  src: "<r:formations in='site' do='each' join=', '><r:show attr='name'/>: <r:show date='event_at'/> (<r:employees do='each' join=', ' do='[name]'/>)</r:formations>"
  res: "form2005: 2005-03-20 (roger), form2006: 2006-03-20 (roger), transm2001: 2001-06-15 (roger), transm2003: 2003-03-20 (), transp2004: 2004-03-15 (roger), transp2006: 2006-04-21 (roger)"