default:
  context:
    lang: 'en'
    visitor: 'ant'
    node: 'status'
  
tags:
  src: "<r:project><r:show attr='name'/>: <r:tags><r:each join=', '><r:show attr='name'/></r:each></r:tags></r:project>"
  res: "cleanWater: art"

tagged:
  context:
    node: 'art'
  src: "<r:tagged><r:each join=', '><r:show attr='name'/></r:each></r:tagged>"
  res: "cleanWater, opening"

documents:
  context:
    node: 'nature'
  src: "<r:documents><r:each join=', '><r:show attr='name'/></r:each></r:documents>"
  res: "forest, tree"

documents_only:
  context:
    node: 'nature'
  src: "<r:documents_only><r:each join=', '><r:show attr='name'/></r:each></r:documents_only>"
  res: "forest"

images:
  context:
    node: 'nature'
  src: "<r:images><r:each join=', '><r:show attr='name'/></r:each></r:images>"
  res: "tree"

icon:
  context:
    node: 'cleanWater'
  src: "<r:icon do='[name]'/>"
  res: "lake"
  
pages:
  context:
    node: 'cleanWater'
  src: "<r:pages><r:each join=', '><r:show attr='name'/></r:each></r:pages>"
  res: "status, track"

root:
  src: "<r:root do='[v_title]'/>"
  res: 'Zena the wild CMS'
  
notes:
  context:
    node: 'cleanWater'
  src: "<r:notes><r:each join=', '><r:show attr='name'/></r:each></r:notes>"
  res: "opening"
  
blog_with_news:
  context:
    node: 'zena'
  src: "<r:notes or='news' do='each' join=', ' do='[name]'/>"
  res: "letter, opening"
  
blog_with_bad_relation:
  context:
    node: 'zena'
  src: "<r:notes or='whatever' do='each' join=', ' do='[name]'/>"
  res: "letter"

pages_limit:
  context:
    node: 'cleanWater'
  src: "<r:pages limit='2' order='name DESC'><r:each join=', '><r:show attr='name'/></r:each></r:pages>"
  res: "track, status"

pages_random:
  context:
    node: 'cleanWater'
  src: "<r:pages limit='3' order='random'><r:each join=', '><r:show attr='name'/></r:each></r:pages>"

nodes_from_project:
  src: "<r:nodes from='project' limit='2'><r:each join=', '><r:show attr='name'/></r:each></r:nodes>"
  res: "lake, lakeAddress"

nodes_from_site:
  src: "<r:nodes from='site' limit='3'><r:each join=', '><r:show attr='name'/></r:each></r:nodes>"
  res: "anonymous, ant, art"

store_node:
  src: "<r:void store='node'><r:parent><r:show attr='name'/>: <r:node select='stored'><r:show attr='name'/></r:node> + <r:node select='main' do='show' attr='id'/></r:parent></r:void>"
  res: "cleanWater: status + 22"

store_img:
  src: "<r:parent><r:icon store='bob'><r:show attr='name'/><r:img link='stored_bob'/></r:icon></r:parent>"
  tem: "/<% if var1 = @node.parent -%><% if var2 = var1.do_find\(:first, .*\) -%><%= var2.name %><%= node_link\(:node=>var1, :text=>img_tag\(var2, :mode=>\"std\"\)\) %><% end -%><% end -%>"
    
author_visitor:
  src: "<r:pages from='site' author='visitor' limit='5'><r:each join=', ' do='show' attr='name'/></r:pages>"
  res: "myLife, nature, status"

author:
  src: "my master: <r:author do='[fullname]'/> my version master: <r:version do='author' do='[fullname]'/>"
  res: "my master: Solenopsis Invicta my version master: Solenopsis Invicta"

zafu_readable_link:
  src: "<r:show attr='tag_ids'/>"
  tem: "<%= @node.tag_zips %>"

zafu_readable_link_for:
  src: "<r:show attr='hot_for_ids'/>"
  tem: "<%= @node.hot_for_zips %>"

zafu_readable_link_id:
  src: "<r:show attr='icon_id'/>"
  tem: "<%= @node.icon_zip %>"

node_id:
  src: "I (<r:show attr='name'/>) know: <r:node select='12'><r:show attr='name'/> with <r:children><span do='each' join=', '><r:show attr='name'>child</r:show></span></r:children></r:node>"
  res: "I (status) know: people with <span>anonymous</span>, <span>ant</span>, <span>lion</span>, <span>tiger</span>"

node_path:
  src: "<r:node select='/projects/wiki'><r:link/></r:node>"
  res: "<a href='/oo/project29.html'>a wiki with zena</a>"

node_root:
  src: "<r:node select='root'><r:show attr='name'/></r:node>"
  res: "zena"

parent_no_parent:
  src: "result=<r:node select='root'><r:parent><r:show attr='name'/></r:parent></r:node>="
  res: "result=="
  
node_not_found:
  src: "result=<r:node select='99'>this is something</r:node>="
  res: "result=="

node_not_found_else:
  src: "result=<r:node select='99'><r:link/><r:else>not found</r:else></r:node>="
  res: "result=not found="

children_else_block:
  src: "<r:children>I am a parent !<r:else>I am not tired.</r:else></r:children>"
  res: "I am not tired."

each_not_in_list:
  src: "<r:each><r:show attr='name'/></r:each>"
  res: "status"

hot_else_block:
  src: "<r:hot>I am hot<r:else>I am not (<r:show attr='name'/>)</r:else> and funny</r:hot>"
  res: "I am not (status)"

hot_not_else_block:
  context:
    node: 'cleanWater'
  src: "<r:hot>I am hot<r:else>I am not</r:else> and funny</r:hot>"
  res: "I am hot and funny"
  
children_else:
  src: "<r:children else='self'><r:each join=', '><r:show attr='name'/></r:each></r:children>"
  res: "status"

many_else:
  src: "<r:hot else='project'><r:show attr='name'/></r:hot>"
  res: "cleanWater"

updated_today:
  src: "<r:pages from='site' updated='today' do='each' join=', ' do='show' attr='name'/>"
  res: "art, status"

upcoming_events:
  src: "<r:pages from='site' log='upcoming' do='each' join=', ' do='show' attr='name'/>"
  res: "people"

in_7_days:
  src: "<r:pages from='site' log='+7days' do='each' join=', ' do='show' attr='name'/>"
  res: "cleanWater, projects"
  
logged_7_days_ago:
  src: "<r:pages from='site' log='-7days' do='each' join=', ' do='show' attr='name'/>"
  res: "cleanWater, projects"
  
around_7_days:
  src: "<r:pages from='site' log='7days' do='each' join=', ' do='show' attr='name'/>"
  res: "art, cleanWater, projects, status"

this_week:
  src: "<r:pages from='site' event='week' do='each' join=', ' do='show' attr='name'/>"
  res: "art, projects"

this_month:
  src: "<r:pages from='site' event='month' do='each' join=', ' do='show' attr='name'/>"
  res: "art, projects"

this_year:
  src: "<r:pages from='site' event='year' do='each' join=', ' do='show' attr='name'/>"
  res: "art, projects"

date_select:
  src: "<r:date select='2006-04-05'><r:notes from='site' log='current' do='each' join=', ' do='show' attr='name'/>"
  res: "proposition"

empty_list:
  src: "<ul do='hot'>blah</ul><r:hot><ul>bib</ul></r:hot>"
  res: ""

order_limit:
  context:
    node: 'zena'
  src: "<ul do='news' from='site' limit='5' order='updated_at DESC'><li do='each'><r:link/></li></ul>"
  res: "<ul><li><a href='/oo/projects/cleanWater/post27.html'>parc opening</a></li></ul>"

relation_not_in_current_node:
  src: "<ul do='news' from='site' limit='5' order='updated_at DESC'><li do='each'><r:link/></li></ul>"
  res: "<ul><li><a href='/oo/projects/cleanWater/post27.html'>parc opening</a></li></ul>"
  
pages_anchor:
  src: "<r:pages from='site' limit='3' do='each' join=', '><r:show attr='name' anchor='true'/></r:pages>"
  res: "<a name='node33'></a>art, <a name='node21'></a>cleanWater, <a name='node32'></a>collections"

projects_from_site:
  src: "<div class='all_projects' do='projects' from='site'><r:each join=', ' do='show' attr='name'/></div>"
  res: "<div class='all_projects'>cleanWater, wiki, zena</div>"

projects:
  src: "<r:projects from='site'><r:each join=', ' do='show' attr='name'/></r:projects>"
  res: "cleanWater, wiki, zena"

nodes:
  src: "<r:nodes from='project'><r:each join=', ' do='show' attr='name'/></r:nodes>"
  res: "lake, lakeAddress, opening, status, track, water"

menu_with_favorites:
  src: "<ul><r:root do='pages' only='public' cache='true' name='menu'><li do='each'><r:link/><ul do='pages'><li do='each' do='link'/></ul></li></r:root><r:node select='visitor' do='favorites'><li class='favorites'><r:trans>favorites</r:trans><ul><li do='each' do='link'/></ul></li></ul>"
  res: "/.*tag33.*tag35.*Clean Water.*favorites.*Nature/"
  
visitor_favorites:
  src: "<r:node select='visitor'><ul do='favorites'><li do='each' do='link'/></ul></r:node>"
  res: "<ul><li><a href='/oo/page39.html'>Nature</a></li></ul>"
  
checkbox:
  src: "<r:checkbox role='hot_for' values='projects' from='site'/>"
  res: "/<input type='checkbox' name='node\[hot_for_ids\]\[\]' value='21' checked='checked'\/> cleanWater/"

checkbox_unique:
  src: "<r:checkbox role='icon' values='images' from='site'/>"
  res: "/<input type='radio' name='node\[icon_id\]' value='30'\/> bird"

direction_both:
  src: "<r:references or='reference_for' do='each' join=', ' do='[name]'/>"
  res: "art, projects"

direction_both_self_auto_ref:
  src: "<r:references or='reference_for' do='each' join=', ' do='[name]'/>"
  res: "art, projects, status"

direction_both_else:
  src: "<r:references direction='both' else='parent' do='each' join=', ' do='[name]'/>"
  res: "cleanWater"

visitor:
  src: "<r:visitor><b do='[v_title]'/></r:visitor>"
  res: "<b>Solenopsis Invicta</b>"

relation_from_site:
  src: "<r:tagged from='site' limit='10' do='each' join=',' do='[name]'/>"
  res: "cleanWater,opening"

where:
  src: "<r:tagged from='site' where='name=opening' do='each' join=',' do='[name]'/>"
  res: "opening"

where_like:
  src: "<r:images from='site' where='name like %ke' do='each' join=',' do='[name]'/>"
  res: "lake"

many_or:
  src: "<r:tagged from='site' or='images from site' or='tags from site' do='each' join=',' do='[name]'/>"
  res: "art,bird,cleanWater,flower,lake,news,opening,tree"
