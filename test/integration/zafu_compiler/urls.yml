default:
  context:
    lang: 'en'
    visitor: 'ant'
    node: 'status'

use_url_in_attribute:
  src: "<a href='#{url}'>blah</a>"
  res: "<a href='http://test.host/oo/projects/cleanWater/page22.html'>blah</a>"

show_url_in_script:
  src: "<script type='text/javascript'>
  digg_url = '<r:url/>';
  </script>"
  res: "/http://test.host/oo/projects/cleanWater/page22.html/"

url_with_param:
  src: "<p do='eval'>url(parent)</p>"
  res: "<p>http://test.host/oo/projects/cleanWater</p>"

show_path:
  src: "<a href='#{path}'>blah</a>"
  res: "<a href='/oo/projects/cleanWater/page22.html'>blah</a>"

link:
  src: "<r:link/>"
  tem: "<a href='<%= zen_path(@node) %>'><%= @node.prop['title'] %></a>"
  res: "<a href='/oo/projects/cleanWater/page22.html'>status title</a>"

do_link:
  src: "<li class='super' do='link'>sample text</li>"
  res: "<li class='super'><a href='/oo/projects/cleanWater/page22.html'>status title</a></li>"

do_link_t:
  src: "<li class='super' do='link' do='t'>blah</li>"
  res: "<li class='super'><a href='/oo/projects/cleanWater/page22.html'>blah</a></li>"

a_link:
  src: "<a class='bob' do='link'>sample text</a> <a id='bar' do='link' do='t'>click here</a>"
  res: "<a class='bob' href='/oo/projects/cleanWater/page22.html'>status title</a> <a id='bar' href='/oo/projects/cleanWater/page22.html'>click here</a>"

zafu_link_with_blocks:
  src: "<a id='branding' do='link'><div do='zazen(text)'/></a>"
  res: "/<a id='branding' href='/oo/projects/cleanWater/page22.html'>.*zazen.*<\/a>/"

link_class:
  src: "<r:link class='hello'/>"
  res: "<a class='hello' href='/oo/projects/cleanWater/page22.html'>status title</a>"

link_set_class:
  src: "<r:link class='#{name}_foo'/>"
  tem: "<a class='<%= \"#{@node.name}_foo\" %>' href='<%= zen_path(@node) %>'><%= @node.prop['title'] %></a>"
  res: "<a class='status_foo' href='/oo/projects/cleanWater/page22.html'>status title</a>"

link_attr:
  src: "<r:link attr='ref_lang'/>"
  tem: "<a href='<%= zen_path(@node) %>'><%= @node.ref_lang %></a>"
  res: "<a href='/oo/projects/cleanWater/page22.html'>en</a>"

link_tattr:
  old_src: "<r:link tattr='ref_lang'/>"
  src: "<r:link eval='trans(ref_lang)'/>"
  tem: "<a href='<%= zen_path(@node) %>'><%= trans(@node.ref_lang) %></a>"
  res: "<a href='/oo/projects/cleanWater/page22.html'>english</a>"

link_trans:
  context:
    lang: 'fr'
  old_src: "<r:link trans='Monday'/>"
  src: "<r:link do='t' text='Monday'/>"
  tem: "<a href='<%= zen_path(@node) %>'>lundi</a>"
  res: "<a href='/oo/projects/cleanWater/page22.html'>lundi</a>"

link_parent:
  src: "<r:link href='parent' text='click here'/>"
  tem: "<a href='<%= zen_path(@node.parent) %>'>click here</a>"
  res: "<a href='/oo/projects/cleanWater'>click here</a>"

#----------- fixed up to here

link_with_block:
  src: "<r:link href='parent'>look at <b do='[name]'>her</b></r:link>"
  tem: "<a href='<%= zen_path(@node.parent) %>'>look at <b><%= @node.name %></b></a>"
  res: "<a href='/oo/projects/cleanWater'>look at <b>status</b></a>"

link_project:
  context:
    node: 'bird_jpg'
  src: "<r:link href='project'/>"
  tem: "<a href='<%= zen_path(@node.project) %>'><%= @node.version.title %></a>"
  res: "<a href='/oo/project29.html'>bird</a>"

link_root:
  src: "<r:link href='root'/>"
  tem: "<a href='<%= zen_path((secure(Node) { Node.find(_ID(zena))})) %>'><%= @node.version.title %></a>"
  res: "<a href='/oo'>status title</a>"

link_anchor:
  src: "<r:link anchor='true'/>"
  res: "<a href='#node22'>status title</a>"

link_anchor_name:
  src: "<r:link anchor='[name]'/>"
  res: "<a href='#status'>status title</a>"

link_anchor_in:
  src: "<r:link anchor='true' in='project' mode='tree'/>"
  res: "<a href='/oo/projects/cleanWater_tree#node22'>status title</a>"

link_anchor_name_in:
  src: "<r:link anchor='[name]' in='parent'/>"
  res: "<a href='/oo/projects/cleanWater#status'>status title</a>"

link_stored:
  src: "<r:void store='foo'><r:parent><r:link href='foo' do='[name]'/></r:parent></r:void>"
  res: "<a href='/oo/projects/cleanWater/page22.html'>cleanWater</a>"

link_date:
  context:
    ref_date: '2008-06-27'
  src: "<r:link date='current_date'/>"
  tem: "/:date=>main_date/"
  res: "<a href='/oo/projects/cleanWater/page22.html?date=2008-06-27'>status title</a>"

link_url_params:
  src: "<r:link plob='hopla'/>"
  res: "<a href='/oo/projects/cleanWater/page22.html?plob=hopla'>status title</a>"

link_url_params_parsed_values:
  src: "<r:link plob='haha [name]'/>"
  res: "<a href='/oo/projects/cleanWater/page22.html?plob=haha+status'>status title</a>"

link_in_anchor:
  src: "<r:anchor do='link'/>"
  res: "<a class='anchor' name='node22' href='/oo/projects/cleanWater/page22.html'>status title</a>"

title_link_mode:
  old_src: "<h2 do='title' link='details'/>"
  src: "<h2 do='link' mode='details' do='title' live='true'/>"
  res: "<h2><a href='/oo/projects/cleanWater/page22_details.html'><span id='_title22'>status title</span></a></h2>"
