<Directory "/Users/gaspard/Sites/">
    Options Indexes MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>


<VirtualHost 127.0.0.1>
  ServerName  localhost

  DocumentRoot /Users/gaspard/svk/trunk_zena/public/test.host
  ErrorLog     /Users/gaspard/svk/trunk_zena/log/apache2.test.host.error.log
  CustomLog    /Users/gaspard/svk/trunk_zena/log/apache2.test.host.access.log combined

  <Directory "/Users/gaspard/svk/trunk_zena/public/test.host">
    Options FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
  </Directory>
  
  # hide all .whatever files
  <DirectoryMatch "^/.*/\.">
    ErrorDocument 403 /404.html
    Order allow,deny
    Deny from all
    Satisfy All
  </DirectoryMatch>
  
  RewriteEngine On

  # Check for maintenance file and redirect all requests
  RewriteCond %{DOCUMENT_ROOT}/system/maintenance.html -f
  RewriteCond %{SCRIPT_FILENAME} !maintenance.html
  RewriteRule ^.*$ /system/maintenance.html [L]

  # Rewrite index to check for static
  RewriteRule ^/$ /index.html [QSA] 

  # Rewrite to check for Rails cached page
  RewriteRule ^([^.]+)$ $1.html [QSA]

  # Let apache serve static files
  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f
  RewriteRule (.*) $1 [L]

  # Don't do forward proxying
  ProxyRequests Off

  # Enable reverse proxying
  #<Proxy *>
  #  Order deny,allow
  #  Allow from all
  #</Proxy>

  # Pass other requests to mongrel instance
  ProxyPass / http://127.0.0.1:3000/
  ProxyPassReverse / http://127.0.0.1:3000/
</VirtualHost>

<VirtualHost 10.0.0.19>
  ServerName  localhost

  DocumentRoot /Users/gaspard/svk/trunk_zena/sites/ocean.host/public
  ErrorLog     /Users/gaspard/svk/trunk_zena/sites/log/apache2.error.log
  CustomLog    /Users/gaspard/svk/trunk_zena/sites/log/apache2.access.log combined

  <Directory "/Users/gaspard/svk/trunk_zena/sites/ocean.host/public">
    Options FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
  </Directory>
  
  # hide all .whatever files
  <DirectoryMatch "^/.*/\.">
    ErrorDocument 403 /404.html
    Order allow,deny
    Deny from all
    Satisfy All
  </DirectoryMatch>
  
  RewriteEngine On

  # Check for maintenance file and redirect all requests
  RewriteCond %{DOCUMENT_ROOT}/system/maintenance.html -f
  RewriteCond %{SCRIPT_FILENAME} !maintenance.html
  RewriteRule ^.*$ /system/maintenance.html [L]

  # Rewrite index to check for static
  RewriteRule ^/$ /index.html [QSA] 

  # Rewrite to check for Rails cached page
  RewriteRule ^([^.]+)$ $1.html [QSA]

  # Let apache serve static files
  RewriteLog %{DOCUMENT_ROOT}%{REQUEST_URI}
  RewriteLogLevel 9
  RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f
  RewriteRule (.*) $1 [L]

  # Don't do forward proxying
  ProxyRequests Off

  # Enable reverse proxying
  #<Proxy *>
  #  Order deny,allow
  #  Allow from all
  #</Proxy>

  # Pass other requests to mongrel instance
  ProxyPass / http://127.0.0.1:3000/
  ProxyPassReverse / http://127.0.0.1:3000/
</VirtualHost>


